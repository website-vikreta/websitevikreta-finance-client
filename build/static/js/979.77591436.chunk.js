"use strict";(self.webpackChunknewproject1801=self.webpackChunknewproject1801||[]).push([[979],{4979:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var r=n(1413),l=n(4165),a=n(5861),o=n(9439),i=n(2791),u=n(3513),c={table:{style:{padding:"0",margin:"0",overflow:"visible",whiteSpace:"nowrap",textOverflow:"none"}},rows:{style:{fontSize:".9rem",padding:"10px 0","&:nth-of-type(even)":{backgroundColor:"rgba(119, 0, 255, 5%)"}}},headCells:{style:{fontSize:"0.8rem ",margin:"0",backgroundColor:"#7700ff",color:"#FFFFFF",whiteSpace:"pre-wrap"}},cells:{style:{margin:"0",overflow:"hidden","&:hover":{content:"attr(title)",position:"static",whiteSpace:"nowrap",fontSize:"0.7rem",opacity:"1",transition:"opacity 0.3s",zIndex:"1"}}},pagination:{style:{fontSize:"0.9rem",padding:"10px"}},subHeaderComponent:{style:{padding:"0"}}},s=n(5985),d=(n(5462),n(3400)),g=n(7247),f=n(1286),p=n(3746),h=n(1889),m=n(3211),x=n(1363),w=n(184),v=i.lazy((function(){return n.e(496).then(n.bind(n,4496))})),F=i.lazy((function(){return Promise.all([n.e(962),n.e(575)]).then(n.bind(n,3575))})),y=i.lazy((function(){return n.e(76).then(n.bind(n,7076))})),Y=function(e){var t=e.items,n=e.setItems,Y=e.render,D=e.setRender,j=e.type,b=e.dateFilter,Z=e.startDate,M=e.endDate,S=(0,i.useState)(""),I=(0,o.Z)(S,2),C=I[0],k=I[1],P=(0,i.useState)(""),N=(0,o.Z)(P,2),O=N[0],T=N[1],z=(0,i.useState)({openDialog:!1,currItem:""}),R=(0,o.Z)(z,2),A=R[0],E=R[1],H=(0,i.useState)({openImgDialog:!1,id:"",paymentType:"",image:""}),_=(0,o.Z)(H,2),L=_[0],B=_[1],J=(0,i.useState)({openDelDialog:!1,deleteId:null}),U=(0,o.Z)(J,2),W=U[0],G=U[1],Q=(0,i.useState)(!1),V=(0,o.Z)(Q,2),q=V[0],K=V[1],X=(0,i.useState)(1),$=(0,o.Z)(X,2),ee=$[0],te=$[1],ne=function(){var e=(0,a.Z)((0,l.Z)().mark((function e(){var t,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("user-info"),e.next=3,(0,m.kk)(JSON.parse(t).id);case 3:r=e.sent,n(r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,l.Z)().mark((function e(){var t,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("user-info"),e.next=3,(0,m.kk)(JSON.parse(t).id);case 3:r=e.sent,n(r.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),D("unset")}),[Y,n,D]),(0,i.useEffect)((function(){function e(e){return e>=4&&e<=6?1:e>=7&&e<=9?2:e>=10&&e<=12?3:4}function n(e,t,n,r,l){return 4===r?e.getFullYear()===t.getFullYear()&&n<=3?l:null:e.getFullYear()!==t.getFullYear()?null:1===r?e.getFullYear()===t.getFullYear()&&n>=4&&n<=6?l:null:2===r?e.getFullYear()===t.getFullYear()&&n>=7&&n<=9?l:null:3===r?e.getFullYear()===t.getFullYear()&&n>=10&&n<=12?l:null:void 0}function r(e,t,n){if(t.getMonth()<3){if(e===t.getFullYear())return n}else if(e-1===t.getFullYear()&&t.getMonth()>=3)return n;return null}var l=t.filter((function(t){return function(t,l){var a=new Date,o=new Date(t.dateOfInvoice),i=new Date(o.getFullYear(),o.getMonth(),o.getDate()),u=i.getMonth()+1;if(1===l)return t;if(2===l)return i.getFullYear()===a.getFullYear()&&i.getMonth()===a.getMonth()&&i.getDate()===a.getDate()?t:null;if(3===l)return i.getFullYear()===a.getFullYear()&&i.getMonth()===a.getMonth()?t:null;if(4===l){var c=e(a.getMonth()+1);return n(i,a,u,c,t)}if(5===l){if(a.getMonth()<3){if(a.getFullYear()===i.getFullYear()&&i.getMonth()<3)return t;if(a.getFullYear()-1===i.getFullYear()&&i.getMonth()>=3)return t}else{if(a.getFullYear()===i.getFullYear()&&i.getMonth()>=3)return t;if(a.getFullYear()+1===i.getFullYear()&&i.getMonth()<3)return t}return null}if(6===l)return 0===a.getMonth()?i.getFullYear()===a.getFullYear()-1&&11===i.getMonth()?t:null:i.getFullYear()===a.getFullYear()&&i.getMonth()===a.getMonth()-1?t:null;if(7===l){var s=e(a.getMonth()+1);return console.log(s),1===s?n(i,a,u,4,t):4===s?function(e,t,n,r){return e.getFullYear()===t.getFullYear()-1&&n>=10&&n<=12?r:null}(i,a,u,t):n(i,a,u,s-1,t)}if(8!==l){if(9===l&&Z&&M){var d=new Date(Z),g=new Date(M);return i>=d&&i<=g?t:null}return 10===l?r(a.getFullYear()-3,i,t):11===l?r(a.getFullYear()-2,i,t):12===l?r(a.getFullYear()-1,i,t):t}if(a.getMonth()<3){if(a.getFullYear()-1===i.getFullYear()&&i.getMonth()<3)return t;if(a.getFullYear()-2===i.getFullYear()&&i.getMonth()>=3)return t}else{if(a.getFullYear()===i.getFullYear()&&i.getMonth()<3)return t;if(a.getFullYear()-1===i.getFullYear()&&i.getMonth()>=3)return t}}(t,b)})).filter((function(e){return function(e,t){return"_id"===t||void 0===t||e.paymentType===t?e:null}(e,j)})).filter((function(e){return String(Object.values(e)).toLowerCase().includes(C.toLowerCase())}));T(l)}),[C,b,t,j,Z,M]);var re=function(){var e=(0,a.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.wz)(t);case 2:(0,s.Am)(" Successfully Deleted",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,theme:"light"}),ne();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(e){return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},ae=function(){var e=(0,a.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B((0,r.Z)((0,r.Z)({},L),{},{openImgDialog:!0,loading:!0})),e.next=3,(0,m.om)(t);case 3:n=e.sent,setTimeout((function(){B({openImgDialog:!0,id:n.data._id,paymentType:n.data.paymentType,image:n.data.paymentProof,loading:!1})}),2e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=[{name:"Sr.No.",cell:function(e,t){return 10*(ee-1)+t+1},sortable:!0,width:"90px"},{name:"Title",selector:function(e){return e.title},cell:function(e){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"cell-with-tooltip",title:e.title,children:e.title})})},sortable:!0},{name:"Amount",selector:function(e){return e.amount},cell:function(e){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"cell-with-tooltip",title:e.amount,children:e.amount})})},sortable:!0},{name:"Category",cell:function(e){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"cell-with-tooltip",title:e.category,children:e.category})})},sortable:!0},{name:"Payment Type",cell:function(e){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"cell-with-tooltip",title:e.paymentType,children:e.paymentType})})}},{name:"Date of Invoice",selector:function(e){return le(new Date(e.dateOfInvoice))},cell:function(e){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"cell-with-tooltip",title:le(new Date(e.dateOfInvoice)),children:le(new Date(e.dateOfInvoice))})})},sortable:!0,width:"135px"},{name:"Date of Payment",selector:function(e){return le(new Date(e.dateOfPayment))},cell:function(e){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"cell-with-tooltip",title:le(new Date(e.dateOfPayment)),children:le(new Date(e.dateOfPayment))})})},sortable:!0,width:"145px"},{name:"Description",cell:function(e){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"cell-with-tooltip",title:e.description,children:e.description})})}},{name:"Payment Proof",cell:function(e){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(d.Z,{title:"View/Download Payment Proof",sx:{color:"#7700ff",padding:"0 2px"},variant:"contained",style:{marginRight:10},onClick:function(){return ae(e._id)},children:(0,w.jsx)(p.Z,{fontSize:"small"})})})},width:"120px"},{name:"Action",cell:function(e){return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.Z,{title:"Edit Item",sx:{color:"#7700ff",padding:"0 2px"},variant:"contained",style:{marginRight:10},onClick:function(){return E({openDialog:!0,currItem:e})},children:(0,w.jsx)(f.Z,{fontSize:"small"})}),(0,w.jsx)(d.Z,{title:"Delete Item",sx:{color:"red",padding:"0 2px"},variant:"contained",onClick:function(){return t=e._id,void G({openDelDialog:!0,deleteId:t});var t},children:(0,w.jsx)(g.Z,{fontSize:"small"})})]})},width:"90px"}],ie=function(){var e=(0,a.Z)((0,l.Z)().mark((function e(){var t,n,r,a,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),e.prev=1,t=O.map((function(e){return e._id})),e.next=5,(0,m.QP)(t);case 5:n=e.sent,r=new Blob([n.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=window.URL.createObjectURL(r),(o=document.createElement("a")).href=a,o.setAttribute("download","All_Items.xlsx"),document.body.appendChild(o),o.click(),document.body.removeChild(o),K(!1),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)(h.ZP,{className:"tableWrapper",container:!0,alignContent:"center",children:[(0,w.jsx)(v,{setRender:D,showModal:A,setShowModal:E,formType:"Edit"}),(0,w.jsx)(F,{delModal:W,setDelModal:G,confirm:function(){re(W.deleteId),G({openDelDialog:!1,deleteId:null})}}),(0,w.jsx)(y,{showImgModal:L,setShowImgModal:B}),(0,w.jsx)(s.Ix,{}),(0,w.jsx)(u.ZP,{columns:oe,data:O,sortFunction:function(e,t,n){return e.sort((function(e,r){var l=t(e),a=t(r),o=0;if("number"===typeof l)l>a?o=1:l<a&&(o=-1);else if(l.match(/\d{1,2}\/\d{1,2}\/\d{4}/)){var i=l.split("/"),u=new Date(i[i.length-1],i[1]-1,i[0]);i=a.split("/"),o=u<new Date(i[i.length-1],i[1]-1,i[0])?1:-1}else l>a?o=1:l<a&&(o=-1);return"desc"===n?-1*o:o}))},customStyles:c,fixedHeader:!0,pagination:!0,paginationResetDefaultPage:!0,paginationTotalRows:O.length,paginationComponentOptions:{rowsPerPageText:"Rows per page:",rangeSeparatorText:"of",noRowsPerPage:!1,selectAllRowsItem:!1,selectAllRowsItemText:"All"},subHeader:!0,subHeaderComponent:(0,w.jsxs)("div",{className:"tableSubHeaderComponent",children:[(0,w.jsxs)("div",{className:"headingWrapper",children:[(0,w.jsx)("h5",{className:"heading heading-two",children:"All records"}),(0,w.jsxs)("button",{className:"btn btn-primary",disabled:q,onClick:ie,children:[q?"Export Data...":"Export Data",q&&(0,w.jsx)(x.G,{icon:"spinner",spin:!0})]})]}),(0,w.jsx)("input",{type:"text",placeholder:"Search Here",className:"form-control",value:C,onChange:function(e){return k(e.target.value)}})]}),onChangePage:function(e){return te(e)},highlightOnHover:!0})]})}}}]);
//# sourceMappingURL=979.77591436.chunk.js.map